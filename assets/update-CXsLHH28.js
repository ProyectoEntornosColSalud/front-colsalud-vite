import{A as a}from"./config-Cfr_j-x6.js";function E(){i(),g()}const i=async()=>{try{const t=await fetch(`${a}/user`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("Authorization")}`}});if(t.ok){const e=await t.json();document.getElementById("name").value=e.name,document.getElementById("last_name").value=e.last_name,document.getElementById("genre").value=e.gender,document.getElementById("birth_date").value=e.birth_date,document.getElementById("document_type").value=e.doc_type,document.getElementById("document_number").value=e.doc_number,document.getElementById("document_number").disabled=!0,document.getElementById("email").value=e.email,document.getElementById("tel").value=e.phone}}catch(t){console.error("Error fetching user appointments:",t)}},g=async()=>{document.getElementById("btn_update").addEventListener("click",async t=>{t.preventDefault();const e=document.getElementById("document_type").value,r=document.getElementById("name").value,d=document.getElementById("last_name").value,c=document.getElementById("genre").value,m=document.getElementById("birth_date").value,l=document.getElementById("email").value,s=document.getElementById("tel").value,u={name:r,last_name:d,gender:c,birth_date:m,doc_type:e,email:l,phone:s};try{const o=await fetch(`${a}/user`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("Authorization")}`},body:JSON.stringify(u)});if(o.ok){const n=document.getElementById("error_register_message");n.classList.remove("text-danger"),n.classList.add("text-success"),n.textContent="Usuario actualizado correctamente",document.getElementById("btn_update").disabled=!0}else{const n=await o.json();document.getElementById("error_register_message").textContent=n.message||"Error desconocido"}}catch(o){console.error("Error al conectar con el backend:",o)}})};export{E as init};
